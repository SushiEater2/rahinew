<!DOCTYPE html>
<html>
<head>
    <title>Console Logger - Google Maps Error Diagnosis</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .console-output { 
            background: #1e1e1e; 
            color: #f8f8f2; 
            padding: 20px; 
            border-radius: 8px; 
            font-family: monospace; 
            max-height: 400px; 
            overflow-y: auto;
            margin: 20px 0;
        }
        .error { color: #ff6b6b; }
        .warning { color: #ffa726; }
        .info { color: #42a5f5; }
        .success { color: #66bb6a; }
        .timestamp { color: #9e9e9e; font-size: 0.8em; }
    </style>
</head>
<body>
    <h1>üîç Google Maps Error Diagnosis</h1>
    <p><strong>API Key:</strong> AIzaSyAR9zdcNvCpMXI56sVqAnpwErXqYvo2E28</p>
    
    <div class="console-output" id="console-output">
        <div class="info">Starting Google Maps error diagnosis...</div>
    </div>
    
    <button onclick="testGoogleMapsAPI()" style="padding: 10px 20px; font-size: 16px; margin: 10px 5px;">
        üîÑ Test Google Maps API
    </button>
    
    <button onclick="clearConsole()" style="padding: 10px 20px; font-size: 16px; margin: 10px 5px;">
        üóëÔ∏è Clear Console
    </button>

    <script>
        const consoleOutput = document.getElementById('console-output');
        const API_KEY = 'AIzaSyAR9zdcNvCpMXI56sVqAnpwErXqYvo2E28';
        
        function logToPage(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.innerHTML = `<span class="timestamp">[${timestamp}]</span> <span class="${type}">${message}</span>`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        function clearConsole() {
            consoleOutput.innerHTML = '<div class="info">Console cleared...</div>';
        }
        
        // Override console methods to capture all messages
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            logToPage(args.join(' '), 'info');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            logToPage('ERROR: ' + args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            logToPage('WARNING: ' + args.join(' '), 'warning');
        };
        
        // Global error handler for uncaught errors
        window.addEventListener('error', function(e) {
            logToPage(`Uncaught Error: ${e.message} at ${e.filename}:${e.lineno}`, 'error');
        });
        
        // Handle Google Maps specific auth failures
        window.gm_authFailure = function() {
            logToPage('Google Maps Authentication Failed - Invalid or restricted API key', 'error');
        };
        
        function testGoogleMapsAPI() {
            logToPage('Testing Google Maps API...', 'info');
            logToPage(`Using API Key: ${API_KEY.substring(0, 8)}...`, 'info');
            
            // Test 1: Try to load the JavaScript API
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&callback=initMap`;
            script.onerror = function() {
                logToPage('Failed to load Google Maps JavaScript API script', 'error');
            };
            document.head.appendChild(script);
        }
        
        function initMap() {
            logToPage('Google Maps JavaScript API loaded successfully!', 'success');
            
            try {
                // Try to create a map
                const map = new google.maps.Map(document.createElement('div'), {
                    center: { lat: 28.6139, lng: 77.2090 },
                    zoom: 12
                });
                logToPage('Map object created successfully!', 'success');
            } catch (error) {
                logToPage(`Failed to create map: ${error.message}`, 'error');
            }
        }
        
        // Test geocoding API
        function testGeocodingAPI() {
            logToPage('Testing Geocoding API...', 'info');
            
            fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=Delhi,India&key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'OK') {
                        logToPage('Geocoding API: SUCCESS', 'success');
                    } else {
                        logToPage(`Geocoding API failed: ${data.status} - ${data.error_message || 'Unknown error'}`, 'error');
                    }
                })
                .catch(error => {
                    logToPage(`Geocoding API network error: ${error.message}`, 'error');
                });
        }
        
        // Auto-start tests
        setTimeout(() => {
            testGoogleMapsAPI();
            setTimeout(testGeocodingAPI, 2000);
        }, 1000);
        
    </script>
</body>
</html>